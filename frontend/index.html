<!DOCTYPE html>
<html>
<head>
	<title>Tour Golfer | Golfing for all</title>
	<link rel="stylesheet" type="text/css" href="lib/css/style.css">
	<link rel="stylesheet" type="text/css" href="lib/css/login.css">
	<link rel="icon" type="image/png" href="img/icons/golf.png">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Ubuntu:regular&subset=Latin,Cyrillic">

	<style>





	</style>
</head>
<body>
<header>
	<div class="navbar-wrapper">
		<div class="container-fluid">
			<nav class="navbar navbar-fixed-top">
				<div class="container">
					<div class="navbar-header">

						<div class="logo"> <img src="img/logo.png" title="tour golfer" alt="logo" /></div>
					</div>
					
				</div>
			</nav>
		</div>
	</div>
</header>
<div class="container">
	<div class="row">
		<div class="col-md-6 col-md-offset-6">
			<div class="panel panel-login">
				<div class="panel-body">
					<div class="row">
						<div class="" id="info"></div>
						<div class="col-lg-12">
							<form id="login-form" action="#" method="post" role="form" style="display: block;">
								<h2>LOGIN</h2>
								<div class="form-group">
									<input type="text" name="username" id="login_username" tabindex="1" class="form-control" placeholder="Username" value="">
								</div>
								<div class="form-group">
									<input type="password" name="password" id="login_password" tabindex="2" class="form-control" placeholder="Password">
								</div>
								<div class="col-xs-6 form-group pull-right">
									<input type="submit" name="login-submit" id="login-submit" tabindex="4" class="form-control btn btn-login" value="Log In">
								</div>
							</form>
							<form id="register-form" action="#" method="post" role="form" style="display: none;">
								<h2>REGISTER</h2>
                                <div class="form-group">
                                    <input type="text" name="first_name" id="first_name" tabindex="1" class="form-control" placeholder="First name" value="">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="last_name" id="last_name" tabindex="1" class="form-control" placeholder="Last name" value="">
                                </div>
								<div class="form-group">
									<input type="email" name="email" id="email" tabindex="1" class="form-control" placeholder="Email" value="">
								</div>
								<div class="form-group">
									<select class="region form-control" >
										<option>
											Region
										</option>
									</select>
								</div>
								<div class="form-group">
									<input type="password" name="password" id="reg_password" tabindex="2" class="form-control" placeholder="Password">
								</div>
								<div class="form-group">
									<input type="password" name="confirm-password" id="confirm-password" tabindex="2" class="form-control" placeholder="Confirm Password">
								</div>
								<div class="form-group">
									<div class="row">
										<div class="col-sm-6 col-sm-offset-3">
											<input type="submit" name="register-submit" id="register-submit" tabindex="4" class="form-control btn btn-register" value="Register Now">
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="panel-heading">
					<div class="row">
						<div class="col-xs-6 tabs">
							<div class="tabs-click active login" id="login-tab">LOGIN</div>
						</div>
						<div class="col-xs-6 tabs">
							<div class="tabs-click register" id="reg-tab">REGISTER</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<footer>
	<div class="container">
		<div class="col-md-10 col-md-offset-1 text-center">
		</div>
	</div>
</footer>

	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


<script>$(function() {
    $('.tabs-click').click(function(e) {
		if($(this).attr('id') == 'login-tab'){
            $("#login-form").delay(100).fadeIn(100);
            $("#register-form").fadeOut(100);
            $('.register').removeClass('active');
            $(this).addClass('active');
		}else{
            $("#register-form").delay(100).fadeIn(100);
            $("#login-form").fadeOut(100);
            $('.login').removeClass('active');
            $(this).addClass('active');
		}

    });




//    var set_up = function() {
//        // REGISTER
//        $('#input1_address').val('/user/register');
//        $('#input1').val(JSON.stringify({"username":"user@test.loc","password":"123", "data":"{}"}));
//        // LOGIN
//        $('#input2_address').val('/user/login');
//        $('#input2').val(JSON.stringify({"username":"user@test.loc","password":"123"}));
//        // LOGOUT
//        $('#input3_address').val('/user/logout');
//        $('#input3').val(JSON.stringify({}));
//        // SET OPTION
//        $('#input4_address').val('/tools/option/test_key');
//        $('#input4').val(JSON.stringify({"value":"123"}));
//        // GET OPTION
//        $('#input5_address').val('/tools/option/test_key');
//        $('#input5').val(JSON.stringify({}));
//        // SET HASH
//        $('#input6_address').val('/tools/h2p');
//        $('#input6').val(JSON.stringify({"data":{"cmd":"custom cmd","additional_data":"additional"}}));
//        // GET HASH
//        $('#input7_address').val('/tools/h2p/put-the-hash-here');
//        $('#input7').val(JSON.stringify({}));
//        // SAVE MAIL QUEUE
//        $('#input8_address').val('/tools/mail');
//        $('#input8').val(JSON.stringify({
//            "sender":"sender@test.loc",
//            "sender_name":"sender",
//            "receiver":"receiver@test.loc",
//            "receiver_name":"receiver",
//            "subject":"test mail",
//            "message":"test message body",
//            "data": {"additional":"test_data"},
//            "get_data": true
//        }));
//        // SET MAIL QUEUE DATA
//        $('#input9_address').val('/tools/mail/put-message-id-here');
//        $('#input9').val(JSON.stringify({"sent":true, "data":{"additional":"additional data"}}));
//        // // GET MAIL QUEUE
//        $('#input10_address').val('/tools/mail/put-message-id-here');
//        $('#input10').val(JSON.stringify({}));
//    }
    var global_url = 'http://tourgolfer.digitalcube.rs:8802/api/';

    var set_regions = function () {
        var _url = global_url+'regions';

        shoot(_url, '', 'GET', region_ok, call_error);

    }
    var shoot = function(url, data, method, on_success, on_error, token) {
        var _headers = {};
        if (token) {
            _headers.authorization = token;
        }
        var _settings =  {
            url: url,
            data: data,
            method: method,
            dataType: 'json',
            headers: _headers
        };
        console.log('SETTINGS', _settings);
        $.ajax(_settings).done( function(res) {
            reset_info();
            if (on_success && typeof on_success === 'function') {
                on_success(res);
            }
        }).fail( function(res) {
            if (on_error && typeof on_error === 'function') {
                on_error(res);
            }
        });
    }

    var call_error = function(res) {
        console.log('ERROR', res);
        $('#info').html(JSON.stringify(res));
        $('#info').addClass('error');
    }

    var reset_info = function() {
        $('#info').html('');
        $('#info').removeClass('error');
        $('#info').removeClass('success');
    }

    var register_ok = function(res) {
        console.log('SUCCESS REGISER', res);
        $('#input1_res').val(JSON.stringify(res));
        $(document).trigger('set-token', [res.token]);
    }

    var region_ok = function(res) {
        console.log('SUCCESS REGION GET', res);
//        $('#input1_res').val(JSON.stringify(res));
//        $(document).trigger('set-token', [res.token]);
    }

    var register = function() {
        var _userdata = $('#input1').val();
        var _url = global_url+'register';
        console.log('Log', _userdata, _url);
        shoot(_url, _userdata, 'POST', register_ok, call_error);
    }

    var login_ok = function(res)  {
        console.log('SUCCESS LOGIN', res);
        $('#input2_res').val(JSON.stringify(res));
        $(document).trigger('set-token', [res.token]);
    }

    var login = function() {
        var _userdata = $('#input2').val();
        var _url = global_url+'login';
        console.log('log', _userdata, _url);
        shoot(_url, _userdata, 'POST', login_ok, call_error);
    }

    var logout_ok = function(res)  {
        console.log('SUCCESS LOGIN', res);
        $('#input3_res').val('204, LOGIN SUCCESS');
    }

    var logout = function() {
        var _userdata = $('#input3').val();
        var _url = $('#input3_address').val();
        var _token = $('#input3_token').val();
        console.log('log', _userdata, _url, _token);
        shoot(_url, _userdata, 'POST', logout_ok, call_error, _token);
    }

    var set_token = function (event, token) {
        $('#input3_token').val(token);
        $('#input4_token').val(token);
        $('#input5_token').val(token);
        $('#input6_token').val(token);
        $('#input7_token').val(token);
        $('#input8_token').val(token);
        $('#input9_token').val(token);
        $('#input10_token').val(token);
    }

    var set_option_ok = function(res) {
        console.log('SUCCESS SET OPTION', res);
        $('#input4_res').val(JSON.stringify(res));
    }

    var set_option = function() {
        var _userdata = $('#input4').val();
        var _url = $('#input4_address').val();
        var _token = $('#input4_token').val();
        console.log('log', _userdata, _url, _token);
        shoot(_url, _userdata, 'PUT', set_option_ok, call_error, _token);
    }

    var get_option_ok = function(res) {
        console.log('SUCCESS GET OPTION', res);
        $('#input5_res').val(JSON.stringify(res));
    }

    var get_option = function() {
        var _userdata = $('#input5').val();
        var _url = $('#input5_address').val();
        var _token = $('#input5_token').val();
        console.log('log', _userdata, _url, _token);
        shoot(_url, _userdata, 'GET', get_option_ok, call_error, _token);
    }

    var set_hash_ok = function(res) {
        console.log('SUCCESS SET HASH', res);
        $('#input6_res').val(JSON.stringify(res));
    }

    var set_hash = function() {
        var _userdata = $('#input6').val();
        var _url = $('#input6_address').val();
        var _token = $('#input6_token').val();
        console.log('log', _userdata, _url, _token);
        shoot(_url, _userdata, 'PUT', set_hash_ok, call_error, _token);
    }

    var get_hash_ok = function(res) {
        console.log('SUCCESS GET HASH', res);
        $('#input7_res').val(JSON.stringify(res));
    }

    var get_hash = function() {
        var _userdata = $('#input7').val();
        var _url = $('#input7_address').val();
        var _token = $('#input7_token').val();
        console.log('log', _userdata, _url, _token);
        shoot(_url, _userdata, 'GET', get_hash_ok, call_error, _token);
    }

    var save_mail_ok = function(res) {
        console.log('SUCCESS SAVE MAIL', res);
        $('#input8_res').val(res ? JSON.stringify(res) : '204, SAVE MAIL SUCCESS');
    }

    var save_mail = function() {
        var _userdata = $('#input8').val();
        var _url = $('#input8_address').val();
        var _token = $('#input8_token').val();
        console.log('log', _userdata, _url, _token);
        shoot(_url, _userdata, 'PUT', save_mail_ok, call_error, _token);
    }

    var save_mail_data_ok = function(res) {
        console.log('SUCCESS SAVE MAIL DATA', res);
        $('#input9_res').val('204, SAVE MAIL DATA SUCCESS');
    }

    var save_mail_data = function() {
        var _userdata = $('#input9').val();
        var _url = $('#input9_address').val();
        var _token = $('#input9_token').val();
        console.log('log', _userdata, _url, _token);
        shoot(_url, _userdata, 'PATCH', save_mail_data_ok, call_error, _token);
    }

    var get_mail_ok = function(res) {
        console.log('SUCCESS GET MAIL DATA', res);
        $('#input10_res').val(JSON.stringify(res));
    }

    var get_mail = function() {
        var _userdata = $('#input10').val();
        var _url = $('#input10_address').val();
        var _token = $('#input10_token').val();
        console.log('log', _userdata, _url, _token);
        shoot(_url, _userdata, 'GET', get_mail_ok, call_error, _token);
    }


    $(document).ready(function() {
//            set_up();
            set_regions()
            $(document).on('set-token',set_token);
            $('#register-submit').on('click', register);
            $('#login-submit').on('click', login);
            $('#input3_submit').on('click', logout);
            $('#input4_submit').on('click', set_option);
            $('#input5_submit').on('click', get_option);
            $('#input6_submit').on('click', set_hash);
            $('#input7_submit').on('click', get_hash);
            $('#input8_submit').on('click', save_mail);
            $('#input9_submit').on('click', save_mail_data);
            $('#input10_submit').on('click', get_mail);
        }
    );
});



</script>
</body>
</html>

